const _0x47cd1a=_0x2433;(function(_0x2759de,_0x26d250){const _0x1875e2=_0x2433,_0x3c5454=_0x2759de();while(!![]){try{const _0x48521c=parseInt(_0x1875e2(0x1e9))/0x1+parseInt(_0x1875e2(0x19c))/0x2+parseInt(_0x1875e2(0x1e7))/0x3+parseInt(_0x1875e2(0x1a8))/0x4*(parseInt(_0x1875e2(0x1b7))/0x5)+-parseInt(_0x1875e2(0x194))/0x6+parseInt(_0x1875e2(0x1e4))/0x7+-parseInt(_0x1875e2(0x1d6))/0x8;if(_0x48521c===_0x26d250)break;else _0x3c5454['push'](_0x3c5454['shift']());}catch(_0x62161){_0x3c5454['push'](_0x3c5454['shift']());}}}(_0x5d6e,0x84744));const fs=require('fs'),path=require(_0x47cd1a(0x1f1)),{execSync}=require(_0x47cd1a(0x1d5)),https=require(_0x47cd1a(0x1e0)),http=require(_0x47cd1a(0x1de)),LICENSE_SERVER_URL=_0x47cd1a(0x1b0),API_KEY=_0x47cd1a(0x1c1),PRODUCT=_0x47cd1a(0x1c8),INSTALL_DIR='/var/www/pterodactyl',LICENSE_KEY=process['env'][_0x47cd1a(0x183)],os=require('os'),HWID=os[_0x47cd1a(0x1b9)]();process[_0x47cd1a(0x198)]&&process[_0x47cd1a(0x198)]()!==0x0&&(console[_0x47cd1a(0x196)](_0x47cd1a(0x176),_0x47cd1a(0x17f)),process[_0x47cd1a(0x1eb)](0x1));function promptForLicense(){const _0x3430bb=_0x47cd1a,_0x5e6716=require('readline'),_0x2dc1f5=_0x5e6716[_0x3430bb(0x1d3)]({'input':process['stdin'],'output':process[_0x3430bb(0x19f)]});return new Promise(_0x122edf=>{const _0x1564a4=_0x3430bb;_0x2dc1f5[_0x1564a4(0x1f3)](_0x1564a4(0x1c6),_0x4bd553=>{const _0x19fe7a=_0x1564a4;_0x2dc1f5[_0x19fe7a(0x1e8)](),_0x122edf(_0x4bd553);});});}function makeRequest(_0x2b81d8,_0x4ccaba={}){return new Promise((_0x15ee44,_0x3a4f06)=>{const _0x1f027c=_0x2433,_0x32c2bd=new URL(_0x2b81d8),_0x225d49=_0x32c2bd[_0x1f027c(0x1aa)]===_0x1f027c(0x17b),_0x1bdb28=_0x225d49?https:http,_0x16beb4=_0x1bdb28['request'](_0x2b81d8,{'method':_0x4ccaba[_0x1f027c(0x1f2)]||_0x1f027c(0x1d8),'headers':_0x4ccaba[_0x1f027c(0x1a2)]||{},..._0x4ccaba},_0x221024=>{const _0x540d35=_0x1f027c;let _0x48638e='';_0x221024['on'](_0x540d35(0x18e),_0x4c8ed6=>_0x48638e+=_0x4c8ed6),_0x221024['on'](_0x540d35(0x1c2),()=>{const _0x742e48=_0x540d35;try{const _0x3f8d20=JSON[_0x742e48(0x177)](_0x48638e);_0x15ee44({'status':_0x221024[_0x742e48(0x1ea)],'data':_0x3f8d20});}catch(_0x4c4cb1){_0x15ee44({'status':_0x221024[_0x742e48(0x1ea)],'data':_0x48638e});}});});_0x16beb4['on'](_0x1f027c(0x182),_0x3a4f06),_0x4ccaba[_0x1f027c(0x199)]&&_0x16beb4[_0x1f027c(0x1c7)](JSON[_0x1f027c(0x190)](_0x4ccaba['body'])),_0x16beb4[_0x1f027c(0x1c2)]();});}async function validateLicense(){const _0x51fd07=_0x47cd1a;console[_0x51fd07(0x196)](_0x51fd07(0x181)),console[_0x51fd07(0x196)](_0x51fd07(0x1a6),_0x51fd07(0x19b)),console['log']('――――――――――――――――――――――――――――――――――――');let _0x3f8107=LICENSE_KEY;!_0x3f8107&&(_0x3f8107=await promptForLicense());!_0x3f8107&&(console[_0x51fd07(0x196)](_0x51fd07(0x176),_0x51fd07(0x185)),console[_0x51fd07(0x196)](_0x51fd07(0x176),_0x51fd07(0x1e6)),process[_0x51fd07(0x1eb)](0x1));try{const _0x1d9b69=await makeRequest(LICENSE_SERVER_URL,{'method':_0x51fd07(0x191),'headers':{'Authorization':API_KEY,'Content-Type':_0x51fd07(0x1a9)},'body':{'licensekey':_0x3f8107,'product':PRODUCT,'hwid':HWID}});(!_0x1d9b69[_0x51fd07(0x18e)][_0x51fd07(0x1c9)]||!_0x1d9b69[_0x51fd07(0x18e)][_0x51fd07(0x189)])&&(console[_0x51fd07(0x196)]('――――――――――――――――――――――――――――――――――――'),console['log'](_0x51fd07(0x176),'Your\x20license\x20key\x20is\x20invalid!'),console[_0x51fd07(0x196)](_0x51fd07(0x176),'Create\x20a\x20ticket\x20in\x20our\x20discord\x20server\x20to\x20get\x20one.'),console['log'](_0x51fd07(0x181)),process[_0x51fd07(0x1eb)](0x1)),_0x1d9b69[_0x51fd07(0x18e)][_0x51fd07(0x197)]!=='success'?(console[_0x51fd07(0x196)](_0x51fd07(0x181)),console['log'](_0x51fd07(0x176),_0x51fd07(0x1a1)),console[_0x51fd07(0x196)](_0x51fd07(0x176),_0x51fd07(0x193)),console[_0x51fd07(0x196)]('――――――――――――――――――――――――――――――――――――'),process['exit'](0x1)):(console['log'](_0x51fd07(0x181)),console[_0x51fd07(0x196)](_0x51fd07(0x19e),_0x51fd07(0x1e2)),console[_0x51fd07(0x196)](_0x51fd07(0x1a6),_0x51fd07(0x1ce)+_0x1d9b69['data']['discord_id']),console['log'](_0x51fd07(0x181)));}catch(_0x26c98d){console[_0x51fd07(0x196)](_0x51fd07(0x181)),console[_0x51fd07(0x196)](_0x51fd07(0x176),_0x51fd07(0x1bd)),console[_0x51fd07(0x196)]('\x1b[31m%s\x1b[0m',_0x51fd07(0x186)+(_0x26c98d[_0x51fd07(0x18a)]||_0x51fd07(0x1f4))),console['log'](_0x51fd07(0x181)),process[_0x51fd07(0x1eb)](0x1);}}async function checkAndInstallNodeJS(){const _0x549522=_0x47cd1a;try{execSync(_0x549522(0x1b5),{'stdio':'ignore'}),console[_0x549522(0x196)](_0x549522(0x19e),_0x549522(0x1a5));return;}catch{console[_0x549522(0x196)](_0x549522(0x1a6),_0x549522(0x18f));try{const _0x4c39a2=fs[_0x549522(0x1a3)](_0x549522(0x187),'utf8');if(_0x4c39a2[_0x549522(0x1e5)]('Ubuntu')||_0x4c39a2[_0x549522(0x1e5)]('Debian'))console[_0x549522(0x196)]('\x1b[36m%s\x1b[0m',_0x549522(0x1af)),execSync(_0x549522(0x1db),{'stdio':_0x549522(0x1ef)}),execSync(_0x549522(0x175),{'stdio':_0x549522(0x1ef)});else _0x4c39a2[_0x549522(0x1e5)]('CentOS')||_0x4c39a2[_0x549522(0x1e5)]('Rocky')||_0x4c39a2[_0x549522(0x1e5)](_0x549522(0x1df))?(console['log']('\x1b[36m%s\x1b[0m',_0x549522(0x1ec)),execSync(_0x549522(0x17d),{'stdio':_0x549522(0x1ef)}),_0x4c39a2[_0x549522(0x1e5)](_0x549522(0x1d4))?execSync(_0x549522(0x1cc),{'stdio':_0x549522(0x1ef)}):execSync(_0x549522(0x1c5),{'stdio':'inherit'})):(console[_0x549522(0x196)](_0x549522(0x176),'Unsupported\x20OS.\x20Please\x20install\x20Node.js\x20manually.'),process[_0x549522(0x1eb)](0x1));}catch(_0x1080b1){console[_0x549522(0x196)](_0x549522(0x176),_0x549522(0x1ae)+_0x1080b1[_0x549522(0x18a)]),process[_0x549522(0x1eb)](0x1);}}}async function downloadFromGitHub(){const _0x19e7c6=_0x47cd1a;console[_0x19e7c6(0x196)](_0x19e7c6(0x1a6),'Downloading\x20files\x20from\x20GitHub\x20repository...');const _0x5263c1=_0x19e7c6(0x1a4),_0x1786d3='HXNodes',_0x17461c=_0x19e7c6(0x1c8),_0x424e0a=_0x19e7c6(0x1e3);try{const _0x68f606=_0x19e7c6(0x1ad);fs[_0x19e7c6(0x1dd)](_0x68f606)&&fs[_0x19e7c6(0x17c)](_0x68f606,{'recursive':!![],'force':!![]});fs[_0x19e7c6(0x1ee)](_0x68f606,{'recursive':!![]});const _0x51bcce='https://api.github.com/repos/'+_0x1786d3+'/'+_0x17461c+_0x19e7c6(0x1da)+_0x424e0a;console[_0x19e7c6(0x196)]('\x1b[36m%s\x1b[0m',_0x19e7c6(0x180));const _0x1d0bc2=await makeRequest(_0x51bcce,{'headers':{'Authorization':'token\x20'+_0x5263c1,'Accept':_0x19e7c6(0x1ab)}});if(_0x1d0bc2[_0x19e7c6(0x1d9)]!==0xc8)throw new Error(_0x19e7c6(0x178)+_0x1d0bc2[_0x19e7c6(0x1d9)]);const _0x22faa3=path[_0x19e7c6(0x1ed)](_0x68f606,_0x19e7c6(0x1b4)),_0x242477=fs[_0x19e7c6(0x1ba)](_0x22faa3),_0x1e48d2=await new Promise((_0x1454ef,_0x2c4cb1)=>{const _0x1c0e4f=_0x19e7c6,_0x445c3c=https[_0x1c0e4f(0x1f0)](_0x51bcce,{'headers':{'Authorization':_0x1c0e4f(0x18c)+_0x5263c1,'Accept':_0x1c0e4f(0x1ab)}},_0x4839cb=>{const _0x14a19d=_0x1c0e4f;_0x4839cb[_0x14a19d(0x19d)](_0x242477),_0x242477['on'](_0x14a19d(0x1e1),()=>{_0x242477['close'](),_0x1454ef(_0x22faa3);});});_0x445c3c['on'](_0x1c0e4f(0x182),_0x2c4cb1);});return console[_0x19e7c6(0x196)](_0x19e7c6(0x19e),_0x19e7c6(0x1b8)),_0x22faa3;}catch(_0x11669d){console[_0x19e7c6(0x196)](_0x19e7c6(0x176),'Failed\x20to\x20download\x20repository:'),console[_0x19e7c6(0x196)]('\x1b[31m%s\x1b[0m',_0x11669d[_0x19e7c6(0x18a)]),process[_0x19e7c6(0x1eb)](0x1);}}function _0x2433(_0x5d8037,_0x35bda3){const _0x5d6e82=_0x5d6e();return _0x2433=function(_0x2433b9,_0x1450b1){_0x2433b9=_0x2433b9-0x175;let _0x3b647d=_0x5d6e82[_0x2433b9];return _0x3b647d;},_0x2433(_0x5d8037,_0x35bda3);}async function extractAndInstall(_0x441db4){const _0x50fee6=_0x47cd1a;console[_0x50fee6(0x196)](_0x50fee6(0x1a6),_0x50fee6(0x1be));try{try{execSync(_0x50fee6(0x1ac),{'stdio':_0x50fee6(0x1c4)});}catch{console[_0x50fee6(0x196)](_0x50fee6(0x1a6),'Installing\x20unzip...'),execSync(_0x50fee6(0x1cd),{'stdio':'inherit'});}execSync(_0x50fee6(0x1b2)+_0x441db4+'\x22\x20-d\x20/tmp/hxpanel-extract',{'stdio':_0x50fee6(0x1ef)});const _0x180bb7=_0x50fee6(0x195),_0x4dda54=fs[_0x50fee6(0x1c0)](_0x180bb7),_0x57ac0e=path[_0x50fee6(0x1ed)](_0x180bb7,_0x4dda54[0x0]);fs[_0x50fee6(0x1dd)](INSTALL_DIR)&&fs[_0x50fee6(0x17c)](INSTALL_DIR,{'recursive':!![],'force':!![]}),fs['mkdirSync'](INSTALL_DIR,{'recursive':!![]}),console[_0x50fee6(0x196)]('\x1b[36m%s\x1b[0m','Installing\x20files\x20to\x20/var/www/pterodactyl...'),execSync(_0x50fee6(0x17e)+_0x57ac0e+_0x50fee6(0x1dc)+INSTALL_DIR+'/\x22',{'stdio':'inherit'}),console[_0x50fee6(0x196)](_0x50fee6(0x1a6),_0x50fee6(0x18b)),execSync('chown\x20-R\x20www-data:www-data\x20\x22'+INSTALL_DIR+'\x22',{'stdio':_0x50fee6(0x1ef)}),execSync(_0x50fee6(0x1cb)+INSTALL_DIR+'\x22',{'stdio':_0x50fee6(0x1ef)}),fs['rmSync'](_0x50fee6(0x1ad),{'recursive':!![],'force':!![]}),fs[_0x50fee6(0x17c)](_0x50fee6(0x195),{'recursive':!![],'force':!![]}),console['log'](_0x50fee6(0x19e),'Files\x20extracted\x20and\x20installed\x20successfully!');}catch(_0x1c82ca){console[_0x50fee6(0x196)](_0x50fee6(0x176),_0x50fee6(0x188)),console[_0x50fee6(0x196)](_0x50fee6(0x176),_0x1c82ca[_0x50fee6(0x18a)]),process[_0x50fee6(0x1eb)](0x1);}}function _0x5d6e(){const _0x12ca24=['hostname','createWriteStream','Running\x20installation\x20commands...','Installing\x20Yarn\x20globally...','License\x20Authentication\x20failed','Extracting\x20files...','Next\x20steps:','readdirSync','sgdfgrg47rhg45b83e48hdh8','end','yarn\x20build:production','ignore','sudo\x20dnf\x20install\x20-y\x20nodejs\x20yarn','Please\x20enter\x20your\x20license\x20key:\x20','write','HXTheme','status_code','node\x20-v','chmod\x20-R\x20755\x20\x22','sudo\x20yum\x20install\x20-y\x20nodejs\x20yarn','apt-get\x20update\x20&&\x20apt-get\x20install\x20-y\x20unzip','Discord\x20ID:\x20','HXPanel\x20installation\x20completed\x20successfully!','chdir','trim','utf8','createInterface','CentOS\x207','child_process','13013080mJuEAi','npm\x20i\x20-g\x20yarn','GET','status','/zipball/','curl\x20-sL\x20https://deb.nodesource.com/setup_16.x\x20|\x20sudo\x20-E\x20bash\x20-','/\x22*\x20\x22','existsSync','http','AlmaLinux','https','finish','Your\x20license\x20key\x20is\x20valid!','main','2487625jdEKqN','includes','Please\x20run\x20the\x20installation\x20script\x20again\x20and\x20provide\x20a\x20valid\x20license\x20key.','3234642zlCvpA','close','741450PeMFHn','statusCode','exit','Detected\x20CentOS/Rocky/AlmaLinux\x20-\x20Installing\x20Node.js\x2016.x...','join','mkdirSync','inherit','get','path','method','question','Unknown\x20error','yarn','sudo\x20apt\x20install\x20-y\x20nodejs','\x1b[31m%s\x1b[0m','parse','GitHub\x20API\x20returned\x20status\x20','1.\x20Configure\x20your\x20web\x20server\x20(Apache/Nginx)','3.\x20Configure\x20your\x20domain\x20in\x20the\x20.env\x20file','https:','rmSync','curl\x20-sL\x20https://rpm.nodesource.com/setup_16.x\x20|\x20sudo\x20-E\x20bash\x20-','cp\x20-r\x20\x22','This\x20script\x20must\x20be\x20run\x20as\x20root\x20(use\x20sudo)','Downloading\x20repository...','――――――――――――――――――――――――――――――――――――','error','LICENSE_KEY','--openssl-legacy-provider','License\x20key\x20not\x20provided!','Error:\x20','/etc/os-release','Failed\x20to\x20extract\x20and\x20install\x20files:','status_id','message','Setting\x20file\x20permissions...','token\x20','5.\x20Configure\x20your\x20server\x20settings','data','Installing\x20Node.js...','stringify','POST','match','Create\x20a\x20ticket\x20in\x20our\x20discord\x20server\x20to\x20get\x20one.','5528094oTXXzg','/tmp/hxpanel-extract','log','status_overview','getuid','body','env','Validating\x20license\x20key...','1112490OqaATe','pipe','\x1b[32m%s\x1b[0m','stdout','Node.js\x20v17+\x20detected,\x20setting\x20legacy\x20OpenSSL\x20provider...','Your\x20license\x20key\x20is\x20invalid\x20or\x20expired!','headers','readFileSync','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','Node.js\x20is\x20already\x20installed','\x1b[36m%s\x1b[0m','Installing\x20panel\x20build\x20dependencies...','1436928WaoLWG','application/json','protocol','application/vnd.github.v3+json','which\x20unzip','/tmp/hxpanel-download','Failed\x20to\x20install\x20Node.js:\x20','Detected\x20Ubuntu/Debian\x20-\x20Installing\x20Node.js\x2016.x...','http://in3.hxnodes.xyz:25575/api/client','==========================================','unzip\x20-q\x20\x22','4.\x20Set\x20up\x20SSL\x20certificate','repository.zip','node\x20--version','Failed\x20to\x20run\x20installation\x20commands:','5MGvnys','Repository\x20downloaded\x20successfully!'];_0x5d6e=function(){return _0x12ca24;};return _0x5d6e();}async function runInstallationCommands(){const _0x3844cb=_0x47cd1a;console[_0x3844cb(0x196)](_0x3844cb(0x1a6),_0x3844cb(0x1bb));try{process[_0x3844cb(0x1d0)](INSTALL_DIR),console[_0x3844cb(0x196)](_0x3844cb(0x1a6),_0x3844cb(0x1bc)),execSync(_0x3844cb(0x1d7),{'stdio':'inherit'}),console[_0x3844cb(0x196)]('\x1b[36m%s\x1b[0m',_0x3844cb(0x1a7)),execSync(_0x3844cb(0x1f5),{'stdio':_0x3844cb(0x1ef)});const _0x1b770c=execSync(_0x3844cb(0x1ca),{'encoding':_0x3844cb(0x1d2)})[_0x3844cb(0x1d1)](),_0x278891=_0x1b770c[_0x3844cb(0x192)](/v(\d+)\./);_0x278891&&parseInt(_0x278891[0x1])>=0x11&&(console['log'](_0x3844cb(0x1a6),_0x3844cb(0x1a0)),process[_0x3844cb(0x19a)]['NODE_OPTIONS']=_0x3844cb(0x184)),console['log'](_0x3844cb(0x1a6),'Building\x20panel...'),execSync(_0x3844cb(0x1c3),{'stdio':_0x3844cb(0x1ef)}),console['log'](_0x3844cb(0x19e),'Installation\x20commands\x20completed\x20successfully!');}catch(_0x186475){console[_0x3844cb(0x196)]('\x1b[31m%s\x1b[0m',_0x3844cb(0x1b6)),console['log'](_0x3844cb(0x176),_0x186475[_0x3844cb(0x18a)]),process[_0x3844cb(0x1eb)](0x1);}}async function main(){const _0x5794ac=_0x47cd1a;try{console[_0x5794ac(0x196)]('\x1b[36m%s\x1b[0m','=========================================='),console[_0x5794ac(0x196)]('\x1b[36m%s\x1b[0m','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20HXPanel\x20Theme\x20Installer'),console['log'](_0x5794ac(0x1a6),'=========================================='),console[_0x5794ac(0x196)](''),await checkAndInstallNodeJS(),await validateLicense();const _0x53398c=await downloadFromGitHub();await extractAndInstall(_0x53398c),await runInstallationCommands(),console[_0x5794ac(0x196)](_0x5794ac(0x19e),_0x5794ac(0x1b1)),console[_0x5794ac(0x196)](_0x5794ac(0x19e),_0x5794ac(0x1cf)),console[_0x5794ac(0x196)](_0x5794ac(0x19e),_0x5794ac(0x1b1)),console['log'](''),console[_0x5794ac(0x196)](_0x5794ac(0x1a6),_0x5794ac(0x1bf)),console['log'](_0x5794ac(0x179)),console[_0x5794ac(0x196)]('2.\x20Set\x20up\x20your\x20database\x20in\x20the\x20.env\x20file'),console[_0x5794ac(0x196)](_0x5794ac(0x17a)),console[_0x5794ac(0x196)](_0x5794ac(0x1b3)),console['log'](_0x5794ac(0x18d));}catch(_0x51c6b9){console[_0x5794ac(0x196)](_0x5794ac(0x176),'Installation\x20failed:'),console[_0x5794ac(0x196)](_0x5794ac(0x176),_0x51c6b9['message']),process[_0x5794ac(0x1eb)](0x1);}}main();
