const _0x3b7d70=_0x980f;(function(_0x15d677,_0x21821c){const _0x4dfc85=_0x980f,_0xb9664d=_0x15d677();while(!![]){try{const _0x489362=parseInt(_0x4dfc85(0x145))/0x1+-parseInt(_0x4dfc85(0x16c))/0x2*(-parseInt(_0x4dfc85(0x175))/0x3)+parseInt(_0x4dfc85(0x12a))/0x4*(-parseInt(_0x4dfc85(0x132))/0x5)+parseInt(_0x4dfc85(0x119))/0x6*(parseInt(_0x4dfc85(0x171))/0x7)+-parseInt(_0x4dfc85(0x17d))/0x8*(-parseInt(_0x4dfc85(0x185))/0x9)+parseInt(_0x4dfc85(0x10e))/0xa+-parseInt(_0x4dfc85(0x154))/0xb*(parseInt(_0x4dfc85(0x17c))/0xc);if(_0x489362===_0x21821c)break;else _0xb9664d['push'](_0xb9664d['shift']());}catch(_0xda81d0){_0xb9664d['push'](_0xb9664d['shift']());}}}(_0x5c07,0xbe077));const fs=require('fs'),path=require(_0x3b7d70(0x14a)),{execSync}=require(_0x3b7d70(0x107)),https=require(_0x3b7d70(0x148)),http=require(_0x3b7d70(0x18b)),LICENSE_SERVER_URL='http://in3.hxnodes.xyz:25575/api/client',API_KEY=_0x3b7d70(0x134),PRODUCT=_0x3b7d70(0x188),INSTALL_DIR=_0x3b7d70(0x153);let LICENSE_KEY=process[_0x3b7d70(0x13b)][_0x3b7d70(0x139)];function readLicenseFromEnvFile(){const _0x8a09e1=_0x3b7d70;try{const _0x5d7fd3='/var/www/pterodactyl/.env';if(fs[_0x8a09e1(0x17e)](_0x5d7fd3)){const _0x97098a=fs[_0x8a09e1(0x12b)](_0x5d7fd3,_0x8a09e1(0x14d)),_0x30e66e=_0x97098a['match'](/LICENSE_KEY\s*=\s*["']?([^"\r\n]+)["']?/i);if(_0x30e66e&&_0x30e66e[0x1])return _0x30e66e[0x1]['trim']();}}catch(_0x598435){console['log'](_0x8a09e1(0x165),_0x8a09e1(0x135)+_0x598435[_0x8a09e1(0x16d)]);}return null;}function _0x980f(_0x21b3df,_0x1cd87c){const _0x5c076a=_0x5c07();return _0x980f=function(_0x980f5f,_0x26131c){_0x980f5f=_0x980f5f-0x107;let _0x173120=_0x5c076a[_0x980f5f];return _0x173120;},_0x980f(_0x21b3df,_0x1cd87c);}!LICENSE_KEY&&(LICENSE_KEY=readLicenseFromEnvFile());const os=require('os'),HWID=os[_0x3b7d70(0x123)]();process['getuid']&&process[_0x3b7d70(0x15e)]()!==0x0&&(console[_0x3b7d70(0x10b)](_0x3b7d70(0x184),_0x3b7d70(0x128)),process[_0x3b7d70(0x110)](0x1));function promptForLicense(){return new Promise(_0x18d247=>{const _0x4b69be=_0x980f;process[_0x4b69be(0x129)]['write'](_0x4b69be(0x120));let _0x486a3f='';const _0xdffc36=_0x4efb4f=>{const _0x37eb92=_0x4b69be,_0x279085=_0x4efb4f[_0x37eb92(0x15b)]();_0x279085==='\x0a'||_0x279085==='\x0d'?(process[_0x37eb92(0x18a)][_0x37eb92(0x131)](_0x37eb92(0x16a),_0xdffc36),process[_0x37eb92(0x18a)][_0x37eb92(0x143)](),_0x18d247(_0x486a3f[_0x37eb92(0x113)]())):_0x486a3f+=_0x279085;};process[_0x4b69be(0x18a)][_0x4b69be(0x180)](),process['stdin'][_0x4b69be(0x11e)](_0x4b69be(0x14d)),process[_0x4b69be(0x18a)]['on']('data',_0xdffc36),setTimeout(()=>{const _0x1d9652=_0x4b69be;process[_0x1d9652(0x18a)][_0x1d9652(0x131)](_0x1d9652(0x16a),_0xdffc36),process[_0x1d9652(0x18a)][_0x1d9652(0x143)](),_0x18d247('');},0x7530);});}function makeRequest(_0x220483,_0xc95786={}){return new Promise((_0x1006c8,_0x1071b2)=>{const _0x42205b=_0x980f,_0x50b97c=new URL(_0x220483),_0x3f719a=_0x50b97c[_0x42205b(0x152)]==='https:',_0x4c16e1=_0x3f719a?https:http,_0x1d7e8b=_0x4c16e1[_0x42205b(0x124)](_0x220483,{'method':_0xc95786[_0x42205b(0x170)]||_0x42205b(0x150),'headers':_0xc95786[_0x42205b(0x17f)]||{},..._0xc95786},_0xbf3061=>{const _0x2363cf=_0x42205b;let _0x20dc2d='';_0xbf3061['on']('data',_0x2a7b84=>_0x20dc2d+=_0x2a7b84),_0xbf3061['on'](_0x2363cf(0x156),()=>{const _0x3c78c6=_0x2363cf;try{const _0x43e3a4=JSON['parse'](_0x20dc2d);_0x1006c8({'status':_0xbf3061[_0x3c78c6(0x162)],'data':_0x43e3a4});}catch(_0x335bca){_0x1006c8({'status':_0xbf3061[_0x3c78c6(0x162)],'data':_0x20dc2d});}});});_0x1d7e8b['on']('error',_0x1071b2),_0xc95786['body']&&_0x1d7e8b['write'](JSON[_0x42205b(0x133)](_0xc95786['body'])),_0x1d7e8b[_0x42205b(0x156)]();});}async function validateLicense(){const _0x3834ac=_0x3b7d70;console['log'](_0x3834ac(0x15c)),console['log'](_0x3834ac(0x11b),'Validating\x20license\x20key...'),console['log']('――――――――――――――――――――――――――――――――――――');let _0x257b7f=LICENSE_KEY;if(_0x257b7f)console[_0x3834ac(0x10b)]('\x1b[36m%s\x1b[0m','License\x20key\x20found\x20from\x20environment\x20or\x20.env\x20file');else{console[_0x3834ac(0x10b)]('\x1b[36m%s\x1b[0m','License\x20key\x20not\x20found\x20in\x20environment\x20or\x20.env\x20file'),console[_0x3834ac(0x10b)](_0x3834ac(0x11b),_0x3834ac(0x11f));try{_0x257b7f=await promptForLicense();}catch(_0x23fc77){console[_0x3834ac(0x10b)](_0x3834ac(0x184),_0x3834ac(0x142)+_0x23fc77[_0x3834ac(0x16d)]),process[_0x3834ac(0x110)](0x1);}}!_0x257b7f&&(console[_0x3834ac(0x10b)]('\x1b[31m%s\x1b[0m',_0x3834ac(0x10c)),console[_0x3834ac(0x10b)](_0x3834ac(0x184),_0x3834ac(0x136)),process[_0x3834ac(0x110)](0x1));try{const _0x5789d3=await makeRequest(LICENSE_SERVER_URL,{'method':_0x3834ac(0x10f),'headers':{'Authorization':API_KEY,'Content-Type':'application/json'},'body':{'licensekey':_0x257b7f,'product':PRODUCT,'hwid':HWID}});(!_0x5789d3[_0x3834ac(0x16a)][_0x3834ac(0x13a)]||!_0x5789d3[_0x3834ac(0x16a)][_0x3834ac(0x167)])&&(console[_0x3834ac(0x10b)]('――――――――――――――――――――――――――――――――――――'),console[_0x3834ac(0x10b)](_0x3834ac(0x184),'Your\x20license\x20key\x20is\x20invalid!'),console[_0x3834ac(0x10b)](_0x3834ac(0x184),_0x3834ac(0x182)),console[_0x3834ac(0x10b)](_0x3834ac(0x15c)),process['exit'](0x1)),_0x5789d3[_0x3834ac(0x16a)][_0x3834ac(0x161)]!==_0x3834ac(0x14b)?(console[_0x3834ac(0x10b)](_0x3834ac(0x15c)),console[_0x3834ac(0x10b)](_0x3834ac(0x184),_0x3834ac(0x15a)),console[_0x3834ac(0x10b)]('\x1b[31m%s\x1b[0m',_0x3834ac(0x182)),console[_0x3834ac(0x10b)](_0x3834ac(0x15c)),process['exit'](0x1)):(console[_0x3834ac(0x10b)]('――――――――――――――――――――――――――――――――――――'),console[_0x3834ac(0x10b)]('\x1b[32m%s\x1b[0m',_0x3834ac(0x11d)),console[_0x3834ac(0x10b)](_0x3834ac(0x11b),_0x3834ac(0x149)+_0x5789d3['data'][_0x3834ac(0x125)]),console['log'](_0x3834ac(0x15c)));}catch(_0x10c86e){console[_0x3834ac(0x10b)]('――――――――――――――――――――――――――――――――――――'),console[_0x3834ac(0x10b)](_0x3834ac(0x184),_0x3834ac(0x127)),console[_0x3834ac(0x10b)](_0x3834ac(0x184),_0x3834ac(0x177)+(_0x10c86e['message']||_0x3834ac(0x12e))),console['log']('――――――――――――――――――――――――――――――――――――'),process['exit'](0x1);}}async function checkAndInstallNodeJS(){const _0x3b754a=_0x3b7d70;try{execSync('node\x20--version',{'stdio':_0x3b754a(0x186)}),console[_0x3b754a(0x10b)](_0x3b754a(0x14c),_0x3b754a(0x122));return;}catch{console[_0x3b754a(0x10b)](_0x3b754a(0x11b),_0x3b754a(0x11a));try{const _0x4e0f43=fs['readFileSync']('/etc/os-release','utf8');if(_0x4e0f43[_0x3b754a(0x15f)](_0x3b754a(0x13c))||_0x4e0f43[_0x3b754a(0x15f)]('Debian'))console['log'](_0x3b754a(0x11b),'Detected\x20Ubuntu/Debian\x20-\x20Installing\x20Node.js\x2016.x...'),execSync(_0x3b754a(0x151),{'stdio':'inherit'}),execSync(_0x3b754a(0x187),{'stdio':_0x3b754a(0x144)});else _0x4e0f43[_0x3b754a(0x15f)](_0x3b754a(0x155))||_0x4e0f43[_0x3b754a(0x15f)](_0x3b754a(0x181))||_0x4e0f43[_0x3b754a(0x15f)]('AlmaLinux')?(console[_0x3b754a(0x10b)](_0x3b754a(0x11b),'Detected\x20CentOS/Rocky/AlmaLinux\x20-\x20Installing\x20Node.js\x2016.x...'),execSync('curl\x20-sL\x20https://rpm.nodesource.com/setup_16.x\x20|\x20sudo\x20-E\x20bash\x20-',{'stdio':'inherit'}),_0x4e0f43[_0x3b754a(0x15f)](_0x3b754a(0x118))?execSync(_0x3b754a(0x108),{'stdio':_0x3b754a(0x144)}):execSync(_0x3b754a(0x176),{'stdio':'inherit'})):(console['log'](_0x3b754a(0x184),'Unsupported\x20OS.\x20Please\x20install\x20Node.js\x20manually.'),process[_0x3b754a(0x110)](0x1));}catch(_0x5424a5){console[_0x3b754a(0x10b)]('\x1b[31m%s\x1b[0m',_0x3b754a(0x174)+_0x5424a5[_0x3b754a(0x16d)]),process['exit'](0x1);}}}function _0x5c07(){const _0x17145a=['NODE_OPTIONS','yarn\x20build:production','Failed\x20to\x20read\x20license\x20key:\x20','pause','inherit','545372kTjPDG','Installing\x20unzip...','Installation\x20failed:','https','Discord\x20ID:\x20','path','success','\x1b[32m%s\x1b[0m','utf8','Installing\x20panel\x20build\x20dependencies...','pipe','GET','curl\x20-sL\x20https://deb.nodesource.com/setup_16.x\x20|\x20sudo\x20-E\x20bash\x20-','protocol','/var/www/pterodactyl','13684DWbHED','CentOS','end','==========================================','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20HXPanel\x20Theme\x20Installer','main','Your\x20license\x20key\x20is\x20invalid\x20or\x20expired!','toString','――――――――――――――――――――――――――――――――――――','https://api.github.com/repos/','getuid','includes','unzip\x20-q\x20\x22','status_overview','statusCode','chmod\x20-R\x20755\x20\x22','chdir','\x1b[33m%s\x1b[0m','join','status_id','Downloading\x20repository...','repository.zip','data','5.\x20Configure\x20your\x20server\x20settings','1700hpgDTI','message','finish','\x22\x20-d\x20/tmp/hxpanel-extract','method','28CatgCP','apt-get\x20update\x20&&\x20apt-get\x20install\x20-y\x20unzip','which\x20unzip','Failed\x20to\x20install\x20Node.js:\x20','4314EsZpgu','sudo\x20dnf\x20install\x20-y\x20nodejs\x20yarn','Error:\x20','Next\x20steps:','error','Downloading\x20files\x20from\x20GitHub\x20repository...','/zipball/','14424ZgXklq','24NghNdY','existsSync','headers','resume','Rocky','Create\x20a\x20ticket\x20in\x20our\x20discord\x20server\x20to\x20get\x20one.','Setting\x20file\x20permissions...','\x1b[31m%s\x1b[0m','534537eJHiFS','ignore','sudo\x20apt\x20install\x20-y\x20nodejs','HXTheme','Installing\x20Yarn\x20globally...','stdin','http','child_process','sudo\x20yum\x20install\x20-y\x20nodejs\x20yarn','Failed\x20to\x20run\x20installation\x20commands:','Installing\x20files\x20to\x20/var/www/pterodactyl...','log','License\x20key\x20not\x20provided!','Failed\x20to\x20extract\x20and\x20install\x20files:','8966220qdJjJl','POST','exit','HXNodes','token\x20','trim','4.\x20Set\x20up\x20SSL\x20certificate','chown\x20-R\x20www-data:www-data\x20\x22','get','readdirSync','CentOS\x207','1280154IhZApe','Installing\x20Node.js...','\x1b[36m%s\x1b[0m','/tmp/hxpanel-download','Your\x20license\x20key\x20is\x20valid!','setEncoding','Prompting\x20for\x20license\x20key...','Please\x20enter\x20your\x20license\x20key:\x20','2.\x20Set\x20up\x20your\x20database\x20in\x20the\x20.env\x20file','Node.js\x20is\x20already\x20installed','hostname','request','discord_id','Extracting\x20files...','License\x20Authentication\x20failed','This\x20script\x20must\x20be\x20run\x20as\x20root\x20(use\x20sudo)','stdout','5689048HHUQZB','readFileSync','1.\x20Configure\x20your\x20web\x20server\x20(Apache/Nginx)','rmSync','Unknown\x20error','Running\x20installation\x20commands...','close','removeListener','5THyjMW','stringify','sgdfgrg47rhg45b83e48hdh8','Warning:\x20Could\x20not\x20read\x20.env\x20file:\x20','Please\x20run\x20the\x20installation\x20script\x20again\x20and\x20provide\x20a\x20valid\x20license\x20key.','--openssl-legacy-provider','status','LICENSE_KEY','status_code','env','Ubuntu','Node.js\x20v17+\x20detected,\x20setting\x20legacy\x20OpenSSL\x20provider...','Repository\x20downloaded\x20successfully!','createWriteStream'];_0x5c07=function(){return _0x17145a;};return _0x5c07();}async function downloadFromGitHub(){const _0x3757f0=_0x3b7d70;console[_0x3757f0(0x10b)](_0x3757f0(0x11b),_0x3757f0(0x17a));const _0x336831='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',_0xc033ff=_0x3757f0(0x111),_0x1085bd='HXTheme',_0xc27934=_0x3757f0(0x159);try{const _0x3767d2=_0x3757f0(0x11c);fs[_0x3757f0(0x17e)](_0x3767d2)&&fs[_0x3757f0(0x12d)](_0x3767d2,{'recursive':!![],'force':!![]});fs['mkdirSync'](_0x3767d2,{'recursive':!![]});const _0x33f59f=_0x3757f0(0x15d)+_0xc033ff+'/'+_0x1085bd+_0x3757f0(0x17b)+_0xc27934;console[_0x3757f0(0x10b)](_0x3757f0(0x11b),_0x3757f0(0x168));const _0x36cdbf=await makeRequest(_0x33f59f,{'headers':{'Authorization':_0x3757f0(0x112)+_0x336831,'Accept':'application/vnd.github.v3+json'}});if(_0x36cdbf[_0x3757f0(0x138)]!==0xc8)throw new Error('GitHub\x20API\x20returned\x20status\x20'+_0x36cdbf['status']);const _0x3c55b9=path[_0x3757f0(0x166)](_0x3767d2,_0x3757f0(0x169)),_0x3a6624=fs[_0x3757f0(0x13f)](_0x3c55b9),_0x48fa1f=await new Promise((_0x5c7b59,_0xf34c2)=>{const _0x399142=_0x3757f0,_0x4f865b=https[_0x399142(0x116)](_0x33f59f,{'headers':{'Authorization':_0x399142(0x112)+_0x336831,'Accept':'application/vnd.github.v3+json'}},_0x35ffff=>{const _0x2bd51d=_0x399142;_0x35ffff[_0x2bd51d(0x14f)](_0x3a6624),_0x3a6624['on'](_0x2bd51d(0x16e),()=>{const _0x232265=_0x2bd51d;_0x3a6624[_0x232265(0x130)](),_0x5c7b59(_0x3c55b9);});});_0x4f865b['on'](_0x399142(0x179),_0xf34c2);});return console[_0x3757f0(0x10b)](_0x3757f0(0x14c),_0x3757f0(0x13e)),_0x3c55b9;}catch(_0x14914e){console[_0x3757f0(0x10b)](_0x3757f0(0x184),'Failed\x20to\x20download\x20repository:'),console[_0x3757f0(0x10b)](_0x3757f0(0x184),_0x14914e['message']),process[_0x3757f0(0x110)](0x1);}}async function extractAndInstall(_0x2c6b91){const _0x505035=_0x3b7d70;console[_0x505035(0x10b)](_0x505035(0x11b),_0x505035(0x126));try{try{execSync(_0x505035(0x173),{'stdio':_0x505035(0x186)});}catch{console[_0x505035(0x10b)](_0x505035(0x11b),_0x505035(0x146)),execSync(_0x505035(0x172),{'stdio':_0x505035(0x144)});}execSync(_0x505035(0x160)+_0x2c6b91+_0x505035(0x16f),{'stdio':_0x505035(0x144)});const _0x509a25='/tmp/hxpanel-extract',_0x261e23=fs[_0x505035(0x117)](_0x509a25),_0x4f0cfb=path[_0x505035(0x166)](_0x509a25,_0x261e23[0x0]);fs[_0x505035(0x17e)](INSTALL_DIR)&&fs[_0x505035(0x12d)](INSTALL_DIR,{'recursive':!![],'force':!![]}),fs['mkdirSync'](INSTALL_DIR,{'recursive':!![]}),console[_0x505035(0x10b)]('\x1b[36m%s\x1b[0m',_0x505035(0x10a)),execSync('cp\x20-r\x20\x22'+_0x4f0cfb+'/\x22*\x20\x22'+INSTALL_DIR+'/\x22',{'stdio':'inherit'}),console[_0x505035(0x10b)](_0x505035(0x11b),_0x505035(0x183)),execSync(_0x505035(0x115)+INSTALL_DIR+'\x22',{'stdio':'inherit'}),execSync(_0x505035(0x163)+INSTALL_DIR+'\x22',{'stdio':'inherit'}),fs[_0x505035(0x12d)](_0x505035(0x11c),{'recursive':!![],'force':!![]}),fs[_0x505035(0x12d)]('/tmp/hxpanel-extract',{'recursive':!![],'force':!![]}),console[_0x505035(0x10b)]('\x1b[32m%s\x1b[0m','Files\x20extracted\x20and\x20installed\x20successfully!');}catch(_0x5a2c37){console['log'](_0x505035(0x184),_0x505035(0x10d)),console[_0x505035(0x10b)](_0x505035(0x184),_0x5a2c37[_0x505035(0x16d)]),process['exit'](0x1);}}async function runInstallationCommands(){const _0x374a7d=_0x3b7d70;console['log'](_0x374a7d(0x11b),_0x374a7d(0x12f));try{process[_0x374a7d(0x164)](INSTALL_DIR),console[_0x374a7d(0x10b)](_0x374a7d(0x11b),_0x374a7d(0x189)),execSync('npm\x20i\x20-g\x20yarn',{'stdio':'inherit'}),console[_0x374a7d(0x10b)]('\x1b[36m%s\x1b[0m',_0x374a7d(0x14e)),execSync('yarn',{'stdio':'inherit'});const _0x3fe8c3=execSync('node\x20-v',{'encoding':_0x374a7d(0x14d)})['trim'](),_0x559108=_0x3fe8c3['match'](/v(\d+)\./);_0x559108&&parseInt(_0x559108[0x1])>=0x11&&(console['log']('\x1b[36m%s\x1b[0m',_0x374a7d(0x13d)),process[_0x374a7d(0x13b)][_0x374a7d(0x140)]=_0x374a7d(0x137)),console['log'](_0x374a7d(0x11b),'Building\x20panel...'),execSync(_0x374a7d(0x141),{'stdio':_0x374a7d(0x144)}),console[_0x374a7d(0x10b)](_0x374a7d(0x14c),'Installation\x20commands\x20completed\x20successfully!');}catch(_0x2f9400){console[_0x374a7d(0x10b)](_0x374a7d(0x184),_0x374a7d(0x109)),console[_0x374a7d(0x10b)](_0x374a7d(0x184),_0x2f9400[_0x374a7d(0x16d)]),process['exit'](0x1);}}async function main(){const _0x2ecef8=_0x3b7d70;try{console[_0x2ecef8(0x10b)](_0x2ecef8(0x11b),'=========================================='),console[_0x2ecef8(0x10b)](_0x2ecef8(0x11b),_0x2ecef8(0x158)),console['log'](_0x2ecef8(0x11b),_0x2ecef8(0x157)),console[_0x2ecef8(0x10b)](''),await checkAndInstallNodeJS(),await validateLicense();const _0x2b94d9=await downloadFromGitHub();await extractAndInstall(_0x2b94d9),await runInstallationCommands(),console[_0x2ecef8(0x10b)]('\x1b[32m%s\x1b[0m',_0x2ecef8(0x157)),console[_0x2ecef8(0x10b)](_0x2ecef8(0x14c),'HXPanel\x20installation\x20completed\x20successfully!'),console['log'](_0x2ecef8(0x14c),_0x2ecef8(0x157)),console['log'](''),console[_0x2ecef8(0x10b)](_0x2ecef8(0x11b),_0x2ecef8(0x178)),console[_0x2ecef8(0x10b)](_0x2ecef8(0x12c)),console[_0x2ecef8(0x10b)](_0x2ecef8(0x121)),console[_0x2ecef8(0x10b)]('3.\x20Configure\x20your\x20domain\x20in\x20the\x20.env\x20file'),console['log'](_0x2ecef8(0x114)),console[_0x2ecef8(0x10b)](_0x2ecef8(0x16b));}catch(_0x1cccf8){console[_0x2ecef8(0x10b)](_0x2ecef8(0x184),_0x2ecef8(0x147)),console[_0x2ecef8(0x10b)](_0x2ecef8(0x184),_0x1cccf8['message']),process[_0x2ecef8(0x110)](0x1);}}main();
